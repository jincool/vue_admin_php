(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d5c93c9"],{"6c09":function(e,t,n){},"6f92":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{xs:24,sm:12,md:8}},[n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("主菜单设置")])]),n("div",[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"鼠标拖动菜单排序",placement:"top"}},[n("el-button",{staticClass:"btn",attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.refreshSort(1)}}},[e._v("保存排序")])],1)],1),n("br"),n("div",[n("el-button",{staticClass:"btn",attrs:{size:"small",plain:""},on:{click:e.addMenu}},[e._v("新增主菜单")])],1),n("div",{staticClass:"cool-list"},e._l(e.menu,function(t){return n("div",{directives:[{name:"dragging",rawName:"v-dragging",value:{item:t,list:e.menu,group:"menu"},expression:"{ item: item, list: menu,group: 'menu' }"}],key:t.id,staticClass:"el-row"},[n("el-dropdown-item",{attrs:{divided:""}},[n("el-col",{attrs:{span:12}},[e._v("\n                                  "+e._s(t.menu_name)+"\n                              ")]),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.editMenu(1,t.id,t.menu_name)}}},[e._v("编辑\n                                  ")]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.deleteMenu(1,t.id)}}},[e._v("删除\n                                  ")])],1)],1)],1)}),0)])],1),n("el-col",{attrs:{xs:24,sm:12,md:8}},[n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("子菜单设置")])]),n("div",[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"鼠标拖动菜单排序",placement:"top"}},[n("el-button",{staticClass:"btn",attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.refreshSort(2)}}},[e._v("保存排序")])],1)],1),n("br"),n("div",[n("el-row",[n("el-col",{attrs:{span:12}},[n("div",[n("el-select",{ref:"selection",attrs:{size:"small",placeholder:"请选择"},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.menu,function(e){return n("el-option",{key:e.id,attrs:{label:e.menu_name,value:e.id}})}),1)],1)]),n("el-col",{attrs:{span:12}},[n("el-button",{staticClass:"btn",attrs:{size:"small",plain:""},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新增子菜单")])],1)],1)],1),n("div",{staticClass:"cool-list"},e._l(e.subMenu,function(t){return n("div",{directives:[{name:"dragging",rawName:"v-dragging",value:{item:t,list:e.subMenu,group:"subMenu"},expression:"{ item: sub, list: subMenu,group: 'subMenu'}"}],key:t.id,staticClass:"el-row"},[n("el-dropdown-item",{attrs:{divided:""}},[n("el-col",{attrs:{span:12}},[e._v("\n                                      "+e._s(t.sub_name)+"\n                                  ")]),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.editSubMenu(2,t.id,t.sub_name)}}},[e._v("编辑\n                                      ")]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.deleteSubMenu(2,t.id)}}},[e._v("删除\n                                      ")])],1)],1)],1)}),0)])],1)],1),n("el-dialog",{attrs:{visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("span",{attrs:{slot:"title"},slot:"title"},[n("el-tag",[e._v(e._s(e.selectedLabel))]),n("el-tag",{attrs:{type:"danger"}},[e._v("添加子菜单")])],1),n("div",[n("el-input",{attrs:{placeholder:"请输入名字"},model:{value:e.subName,callback:function(t){e.subName=t},expression:"subName"}})],1),n("br"),n("div",[n("el-input",{attrs:{placeholder:"请输入地址"},model:{value:e.component,callback:function(t){e.component=t},expression:"component"}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addSubMenu}},[e._v("确 定")])],1)])],1)},i=[],a={name:"system_menu",data:function(){return{menu:[],subMenu:[],value:"",selectedLabel:"",subName:"",component:"",dialogVisible:!1}},methods:{getMenu:function(){var e=this;return new Promise(function(t,n){e.$api.get("?f=system&c=Menu&a=getMenu").then(function(n){200===n.status&&(e.menu=n.data,e.value=n.data[0].id,t(e.value))})})},getSubMenu:function(e){var t=this;this.$api.post("?f=system&c=Menu&a=getSubMenu",{id:e}).then(function(e){200===e.status&&(t.subMenu=e.data)})},editMenu:function(e,t,n){var s=this;this.mesEditBox("请修改菜单名","?c=Menu&a=editMenu",{id:t,type:e},n).then(function(e){1===e&&s.getMenu()})},deleteMenu:function(e,t){var n=this;this.deleteBox("?f=system&c=Menu&a=deleteMenu",{id:t,type:e}).then(function(e){1===e&&n.getMenu()})},editSubMenu:function(e,t,n){var s=this;this.mesEditBox("请修改菜单名","?f=system&c=Menu&a=editMenu",{id:t,type:e},n).then(function(e){1===e&&s.getSubMenu(s.value)})},deleteSubMenu:function(e,t){var n=this;this.deleteBox("?f=system&c=Menu&a=deleteMenu",{id:t,type:e}).then(function(e){1===e&&n.getSubMenu(n.value)})},handleChange:function(){var e=this;this.$nextTick(function(){e.selectedLabel=e.$refs.selection.selectedLabel}),console.log(this.value),this.getSubMenu(this.value)},addMenu:function(){var e=this;this.mesEditBox("请添加主菜单","?f=system&c=Menu&a=addMenu",{}).then(function(t){1===t&&e.getMenu()})},addSubMenu:function(){var e=this;this.dialogVisible=!1;var t={menuId:this.value,subName:this.subName,component:this.component};this.$api.post("?f=system&c=Menu&a=addSubMenu",t).then(function(t){1===t.data.status?(e.$message({type:"info",message:"操作成功"}),e.getSubMenu(e.value)):e.$message({type:"info",message:"操作失败"})})},refreshSort:function(e){var t=this,n={1:this.menu,2:this.subMenu}[e],s={type:e,dataMenu:n};this.$api.post("?f=system&c=Menu&a=refreshSort",s).then(function(e){1===e.data.status?t.$message({type:"info",message:"操作成功"}):t.$message({type:"info",message:"操作失败"})})},handleClose:function(e){this.$message({type:"info",message:"取消输入"}),e()},mesEditBox:function(e,t,n,s){var i=this;return new Promise(function(a,o){i.$prompt(e,"",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:s}).then(function(e){var s=e.value,u={name:s},l=Object.assign(u,n);i.$api.post(t,l).then(function(e){1===e.data.status?(i.$message({type:"info",message:"操作成功"}),a(e.data.status)):o(i.$message({type:"info",message:"操作失败"}))})}).catch(function(){i.$message({type:"info",message:"取消输入"})})}).catch(function(e){console.log(e)})},deleteBox:function(e,t){var n=this;return new Promise(function(s,i){n.$confirm("此操作将删除该选项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(a){a.value;n.$api.post(e,t).then(function(e){1===e.data.status?(n.$message({type:"info",message:"操作成功"}),s(e.data.status)):i(n.$message({type:"info",message:"操作失败"}))})}).catch(function(){n.$message({type:"info",message:"取消输入"})})}).catch(function(e){console.log(e)})}},created:function(){var e=this;this.getMenu().then(function(t){e.selectedLabel=e.$refs.selection.selectedLabel,e.getSubMenu(t)})},mounted:function(){this.$dragging.$on("dragged",function(e){var t=e.value;console.log(t.list)})}},o=a,u=(n("85a1"),n("2877")),l=Object(u["a"])(o,s,i,!1,null,"2cb7d39d",null);t["default"]=l.exports},"85a1":function(e,t,n){"use strict";var s=n("6c09"),i=n.n(s);i.a}}]);